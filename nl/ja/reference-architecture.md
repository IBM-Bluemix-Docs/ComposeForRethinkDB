---
copyright:
  years: 2016,2018
lastupdated: "2018-06-14"
---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}
{:tip: .tip}

# アーキテクチャー 
{: #architecture}

## 複製

{{site.data.keyword.composeForRethinkDB_full}} サービスは、3 つのデータ・ノードで構成される 1 つのクラスターを使用します。 サービスをデプロイする領域を選択すると、3 つのノードはその領域のアベイラビリティー・ゾーンに分散されます。 RethinkDB クラスターは、書き込みを調整するマスター・メンバーで構成されます。  追加のメンバーは、1 つのノードに障害が発生した場合にマスターになることができます。 1 つのデータ・メンバーが到達不能になっても、クラスターは引き続き正常に作動します。

### データの複製のセットアップ

ノード間のデータの複製は、自動プロセスでは**ありません**。 データは、各表のレプリカとシャードの数に基づいてクラスター全体に分散されます。 全シャードに分散するように表を構成する必要があります。 そのためには 3 つの方法があります。

1. RethinkDB Web インターフェースを使用します。 組み込み Web インターフェースの URL は、ご使用のサービスの_「概要」_ページに表示される_「管理」_の接続ストリングです。 ここですべての表のシャーディングと複製を構成できます。
2. `reconfigure` ReQL コマンドを使用します。 `reconfigure` の構文と、さまざまな言語での使用法について詳しくは、[ReQL reference](https://www.rethinkdb.com/api/javascript/reconfigure/) を参照してください。
3. `tableCreate` に対してオプションの _replicas_ パラメーターを使用することによって、表の作成時に複製を構成するようにアプリケーションをプログラミングできます。 `tableCreate` の構文と、さまざまな言語での使用法について詳しくは、[ReQL reference](https://www.rethinkdb.com/api/javascript/table_create/) を参照してください。

## ディスクの暗号化

すべての {{site.data.keyword.composeForRethinkDB}} サービスには、保存時の暗号化機能があります。 データは、ボリューム・レベルの暗号化が有効になっているサーバー上に配置されます。 

{{site.data.keyword.composeForRethinkDB}} はマネージド・サービスであるので、{{site.data.keyword.cloud}} Compose のオペレーターはデータを見ることができます。 ディスクの暗号化に加えて、個人情報を暗号化してからデータベース内に保管するか、データベース自体に対して暗号化を有効にする拡張機能または機能を使用することをお勧めします。 これらの方法は使いやすさやパフォーマンスに影響することがありますが、個人情報を暗号化で保護するのは良い習慣です。

## 自動スケーリング

リソースは、RethinkDB データベースのディスク・ストレージ合計使用量に基づいて自動的にスケーリングされます。メモリー使用量は、プロビジョンされるストレージとの比率が 1:10 になるように調整されます。 これらのリソースはユニットとしてバンドルされます。

自動スケーリングは、データベースの短期間から中期間のトレンドに対応するように設計されています。 サービスは 1 時間ごとに検査され、ディスク・スペースが不足している場合は、追加のユニットがデプロイメントに割り振られます。

自動スケーリングにより、ディスク/メモリー使用量が縮小したデプロイメントのスケールが縮小されることはありません。 データベースにプロビジョンされたリソースは、将来の必要に備えて、手動でデプロイメントを縮小しない限り保持されます。
{: .tip}
