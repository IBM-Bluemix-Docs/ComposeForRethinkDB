---

copyright:
  years: 2017
lastupdated: "2017-10-16"
---

{:new_window: target="_blank"}
{:shortdesc: .shortdesc}
{:screen: .screen}
{:codeblock: .codeblock}
{:pre: .pre}

# バックアップ

{: #backups}

サービス・ダッシュボードの*「管理」*ページから、バックアップを作成してダウンロードできます。スケジュールされたバックアップと手作業のバックアップの両方が利用できます。

## 既存のバックアップの表示

データベースの日次バックアップは自動的にスケジュールされます。既存のバックアップを表示するには、サービス・ダッシュボードの*「管理」*ページに移動します。 

![バックアップ](./images/rethink-backups-show.png "サービス・ダッシュボードのバックアップのリスト")

対応する行をクリックして、選択可能バックアップのオプションを展開します。

![バックアップのオプション](./images/rethink-backups-options.png "バックアップのオプション。") 

## オンデマンドでのバックアップ作成

スケジュールされたバックアップだけでなく、バックアップを手作業で作成することができます。手動でバックアップを作成する場合は、サービス・ダッシュボードの*「管理」*ページに移動して、*「今すぐバックアップ」*をクリックします。

## バックアップのダウンロード

バックアップをダウンロードするには、サービス・ダッシュボードの*「管理」*ページに移動し、ダウンロードするバックアップに対応する行で*「ダウンロード」*をクリックします。

## バックアップの内容

RethinkDB バックアップは、実行中のデータベース・クラスターに対して RethinkDB コマンド・ライン・ユーティリティーの `dump` コマンドを使用して、デプロイメント全体をバックアップします。データベースと表の内容、およびメタデータを保存します。`dump` は、クラスターのリソースは使用しますが、クライアントをロックアウトしないので、稼働中のクラスターに対して実行できます。Compose は、`rethinkdb restore` が直接使用できる形式で RethinkDB デプロイメントのバックアップを提供します。

## ローカル・データベースでのバックアップの使用

RethinkDB バックアップをダウンロードできるので、デプロイメントのローカル・インスタンスを実行できます。

1. [rethink](https://www.rethinkdb.com/docs/install/) をインストールします
2. パスに [python ドライバー](https://www.rethinkdb.com/docs/install-drivers/python/)をインストールします。
3. 圧縮されたバックアップ・ファイルをダウンロードします。RethinkDB ツールはバックアップ・アーカイブ・ファイルに対応しているため、ユーザーがアーカイブ・ファイルを解凍する必要はありません。
4. RethinkDB を起動するには、1 つのターミナル・ウィンドウで `rethinkdb` コマンドを実行し、別のターミナル・ウィンドウで、バックアップをダウンロードした場所に移動して `rethinkdb restore backup.tar.gz` を実行します。

ブラウザー・ウィンドウを開いて`locahost:8080` にナビゲートし、RethinkDB UI とデータを確認します。

## ローカル・バックアップをサービスに取り込む

{{site.data.keyword.composeForRethinkDB}} に復元するバックアップ・ファイルがローカルにある場合は、`rethinkdb restore` を使用してこれを実行できます。

1. [rethink](https://www.rethinkdb.com/docs/install/) をインストールします
2. パスに [python ドライバー](https://www.rethinkdb.com/docs/install-drivers/python/)をインストールします。
3. 証明書をサービスの*「概要」*ページからダウンロードして、ローカルに compose.cert として保存します。
4. 次のコマンドを使用して、バックアップから復元します。

  ```
  rethinkdb restore -c <host>:<port> --tls-cert compose.cert -p backup.tar.gz
  ```

ホストとポートの値は、サービスの*「概要」*ページに表示される接続ストリングに含まれています。コマンドの `-p` は、_認証資格情報_の入力を求めるプロンプトを出します。

**注意:** 既存のデプロイメントに復元する場合は、`--force` を使用して既存の表を上書きする必要がある場合があります。
